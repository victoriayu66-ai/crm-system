这是一个空的 YAML 前置内容，告诉 Jekyll 这是一个有效的文件。
---

## ✨ 核心功能

### 1. 用户认证系统
- ✅ 用户注册（仅限企业邮箱）
- ✅ 用户登录（仅限企业邮箱）
- ✅ 自动保持登录状态
- ✅ 退出登录功能
- ✅ 密码验证（至少6位）

### 2. 企业邮箱限制 ⭐ 核心特性
- ✅ **仅支持 @fengfancloud.com 企业邮箱**
- ✅ 注册时验证邮箱域名
- ✅ 登录时验证邮箱域名
- ✅ 非企业邮箱无法使用系统
- ✅ 大小写不敏感验证
- ✅ 友好的错误提示

### 3. 角色权限管理
#### 管理员角色
- ✅ 查看所有用户创建的客户
- ✅ 添加客户无查重限制
- ✅ 查看全局统计数据
- ✅ 管理所有商机和交互记录

#### 普通用户角色
- ✅ 只能查看自己创建的客户
- ✅ 添加客户时自动查重（邮箱+电话）
- ✅ 只能看到自己客户的统计数据
- ✅ 数据完全隔离

### 4. 客户查重功能
- ✅ 检查邮箱重复
- ✅ 检查电话重复
- ✅ 编辑时排除自身
- ✅ 管理员无查重限制
- ✅ 普通用户强制查重

---

## 🔐 默认账号

### 管理员账号
- **邮箱**：admin@fengfancloud.com
- **密码**：admin123
- **角色**：管理员
- **权限**：全局数据访问

---

## 📋 文件清单

| 文件名 | 大小 | 说明 |
|--------|------|------|
| index.html | 44KB | 主页面（含登录/注册界面） |
| app.js | 50KB | 核心业务逻辑 |
| README.md | 9KB | 完整功能说明文档 |
| 使用指南.md | 5KB | 详细使用教程 |
| 企业邮箱验证测试.md | 3KB | 测试指南 |

---

## 🎯 使用流程

### 首次使用
1. 打开 `index.html`
2. 使用默认管理员账号登录：
   - 邮箱：admin@fengfancloud.com
   - 密码：admin123
3. 查看系统功能

### 注册新用户
1. 点击"立即注册"
2. 填写姓名和企业邮箱（必须 @fengfancloud.com）
3. 设置密码（至少6位）
4. 注册成功后登录

### 测试权限
1. 使用普通用户登录
2. 添加客户（会自动查重）
3. 查看数据（只能看到自己的）
4. 切换到管理员账号
5. 查看所有数据

---

## 🔍 关键代码说明

### 企业邮箱验证
javascript
// 企业邮箱域名配置
const COMPANY_EMAIL_DOMAIN = '@fengfancloud.com';

// 验证函数
function isValidCompanyEmail(email) {

return email.toLowerCase().endsWith(COMPANY_EMAIL_DOMAIN.toLowerCase());
}


### 权限过滤
javascript
// 客户列表过滤
if (currentUser && currentUser.role !== 'admin') {

filteredCustomers = filteredCustomers.filter(c => c.createdBy === currentUser.id);
}


### 客户查重
javascript
function checkDuplicateCustomer(email, phone, excludeId = null) {

return customers.some(c => {
    if (excludeId && c.id === excludeId) return false;
    return c.email === email || (phone && c.phone === phone);
});
}


---

## 🧪 测试场景

### ✅ 测试通过的场景
1. 使用企业邮箱注册 → 成功
2. 使用非企业邮箱注册 → 拒绝（提示使用企业邮箱）
3. 使用企业邮箱登录 → 成功
4. 使用非企业邮箱登录 → 拒绝（提示使用企业邮箱）
5. 管理员查看所有客户 → 显示全部
6. 普通用户查看客户 → 只显示自己的
7. 普通用户添加重复客户 → 拒绝（提示已存在）
8. 管理员添加重复客户 → 允许

---

## 💡 技术亮点

1. **企业邮箱验证**
   - 集中配置，易于修改
   - 大小写不敏感
   - 友好的错误提示

2. **权限隔离**
   - 数据级权限控制
   - 统计数据自动过滤
   - 图表数据权限过滤

3. **用户体验**
   - 自动保存登录状态
   - 实时显示用户信息
   - 角色标签区分

4. **数据安全**
   - 客户归属明确
   - 查重防止数据冲突
   - 权限验证完整

---

## 🔧 配置说明

### 修改企业邮箱域名
如需修改企业邮箱域名，编辑 `app.js` 文件：

javascript
// 找到这一行
const COMPANY_EMAIL_DOMAIN = '@fengfancloud.com';

// 修改为新域名
const COMPANY_EMAIL_DOMAIN = '@newcompany.com';


### 修改默认管理员
编辑 `app.js` 文件中的初始化数据：

javascript
users = [

{
    id: 1,
    name: '系统管理员',
    email: 'admin@fengfancloud.com',  // 修改邮箱
    password: 'admin123',              // 修改密码
    role: 'admin',
    createdAt: '2026-01-01'
}
];


---

## 📊 数据存储

所有数据存储在浏览器 LocalStorage 中：

| 键名 | 内容 |
|------|------|
| users | 用户列表 |
| currentUser | 当前登录用户 |
| customers | 客户列表 |
| interactions | 交互记录 |
| opportunities | 商机列表 |

---

## ⚠️ 注意事项

1. **数据安全**
   - 密码以明文存储在 LocalStorage
   - 仅适用于内部系统演示
   - 生产环境需要后端加密

2. **浏览器兼容**
   - 需要支持 LocalStorage
   - 推荐使用 Chrome/Firefox/Edge
   - 不支持 IE

3. **数据备份**
   - 清除浏览器缓存会丢失数据
   - 建议定期导出备份
   - 可通过浏览器开发者工具查看 LocalStorage

4. **企业邮箱**
   - 必须严格匹配 @fengfancloud.com
   - 大小写不敏感
   - 不支持其他邮箱格式

---

## 🎉 版本信息

- **版本号**：v2.0.0
- **发布日期**：2026-02-12
- **主要更新**：
  - 用户认证系统
  - 企业邮箱限制
  - 角色权限管理
  - 客户查重功能
  - 数据权限隔离

---

## 📞 技术支持

如有问题，请参考：
1. `README.md` - 完整功能说明
2. `使用指南.md` - 详细操作教程
3. `企业邮箱验证测试.md` - 测试指南

**开发者**：SuperMagic  
**更新时间**：2026-02-12
